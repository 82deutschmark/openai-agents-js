---
title: ツール
description: Provide your agents with capabilities via hosted tools or custom function tools
---

import { Code } from '@astrojs/starlight/components';
import toolsFunctionExample from '../../../../../../examples/docs/tools/functionTools.ts?raw';
import toolsHostedToolsExample from '../../../../../../examples/docs/tools/hostedTools.ts?raw';
import nonStrictSchemaTools from '../../../../../../examples/docs/tools/nonStrictSchemaTools.ts?raw';
import agentsAsToolsExample from '../../../../../../examples/docs/tools/agentsAsTools.ts?raw';
import mcpLocalServer from '../../../../../../examples/docs/tools/mcpLocalServer.ts?raw';

ツールは、エージェント が **行動を実行** できるようにします — データの取得、外部 API の呼び出し、コードの実行、さらには コンピュータ操作 まで。JavaScript/TypeScript SDK は 4 つのカテゴリーをサポートします:

1. **組み込みツール（Hosted）** — モデルと同じ OpenAI のサーバー上で動作します （Web 検索、ファイル検索、コンピュータ操作、Code Interpreter、画像生成）
2. **関数ツール** — 任意のローカル関数を JSON スキーマでラップし、LLM が呼び出せるようにします
3. **エージェントをツールとして** — エージェント 全体を呼び出し可能なツールとして公開します
4. **ローカル MCP サーバー** — 手元のマシンで動作する Model Context Protocol サーバーをアタッチします

---

## 1. 組み込みツール（Hosted）

`OpenAIResponsesModel` を使用する場合、次の組み込みツールを追加できます:

| ツール                      | タイプ文字列         | 目的                                       |
| --------------------------- | -------------------- | ------------------------------------------ |
| Web 検索                    | `'web_search'`       | インターネット検索                         |
| ファイル / リトリーバル検索 | `'file_search'`      | OpenAIがホストする ベクトルストア をクエリ |
| コンピュータ操作            | `'computer'`         | GUI の操作を自動化                         |
| Code Interpreter            | `'code_interpreter'` | サンドボックス化された環境でコードを実行   |
| 画像生成                    | `'image_generation'` | テキストに基づいて画像を生成               |

<Code lang="typescript" code={toolsHostedToolsExample} title="Hosted tools" />

正確なパラメーターセットは OpenAI Responses API と一致します。`rankingOptions` やセマンティック フィルターなどの高度なオプションについては、公式ドキュメントを参照してください。

---

## 2. 関数ツール

`tool()` ヘルパーを使うと、任意の関数をツールにできます。

<Code
  lang="typescript"
  code={toolsFunctionExample}
  title="Function tool with Zod parameters"
/>

### オプションリファレンス

| フィールド      | 必須   | 説明                                                                                                                                                                                                  |
| --------------- | ------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `name`          | いいえ | 関数名（例: `get_weather`）をデフォルトに使用                                                                                                                                                         |
| `description`   | はい   | LLM に表示される、人間が読みやすい明確な説明                                                                                                                                                          |
| `parameters`    | はい   | Zod スキーマ または raw JSON スキーマオブジェクト。Zod の parameters は自動的に strict モードを有効化                                                                                                 |
| `strict`        | いいえ | `true`（デフォルト）の場合、引数が検証に失敗すると SDK はモデルエラーを返します。あいまい一致にするには `false` に設定                                                                                |
| `execute`       | はい   | `(args, context) => string                                                                                               \| Promise<string>` — ビジネスロジック。2 番目のオプション引数は`RunContext` |
| `errorFunction` | いいえ | 内部エラーをユーザーに見える文字列へ変換するためのカスタムハンドラー `(context, error) => string`                                                                                                     |

### 非 strict な JSON スキーマ ツール

無効または不完全な入力をモデルに推測させたい場合は、raw JSON スキーマ使用時に strict モードを無効化できます:

<Code
  lang="typescript"
  code={nonStrictSchemaTools}
  title="Non-strict JSON schema tools"
/>

---

## 3. エージェントをツールとして

会話を完全にハンドオフせずに、ある エージェント に別の エージェント を支援させたい場合があります。`agent.asTool()` を使用します:

<Code lang="typescript" code={agentsAsToolsExample} title="Agents as tools" />

内部的に SDK は次を行います:

- 単一の `input` パラメーターをもつ関数ツールを作成
- ツールが呼び出されたときに、その入力でサブエージェントを実行
- 最後のメッセージ、または `customOutputExtractor` で抽出された出力を返却

---

## 4. ローカル MCP サーバー

ローカルの [Model Context Protocol](https://modelcontextprotocol.io/) サーバーを通じてツールを公開し、エージェントにアタッチできます。`MCPServerStdio` を使ってサーバーを起動して接続します:

<Code lang="typescript" code={mcpLocalServer} title="Local MCP server" />

完全な code examples は [`filesystem-example.ts`](https://github.com/openai/openai-agents-js/tree/main/examples/mcp/filesystem-example.ts) を参照してください。

---

## ツール使用の挙動

モデルがいつどのようにツールを必ず使用すべきかを制御する方法については、[エージェント](/openai-agents-js/ja/guides/agents#forcing-tool-use) を参照してください（`tool_choice`、`toolUseBehavior` など）。

---

## ベストプラクティス

- **短く明確な説明** — ツールが何をするか、いつ使うべきかを記述
- **入力を検証** — 可能であれば Zod スキーマで厳密な JSON 検証を行う
- **エラーハンドラーで副作用を避ける** — `errorFunction` は有用な文字列を返すべきで、例外を throw しない
- **ツールは単一責務** — 小さく合成可能なツールはモデルの推論を改善

---

## 次のステップ

- [ツール使用の強制](/openai-agents-js/ja/guides/agents#forcing-tool-use) について学ぶ
- ツールの入力または出力を検証するために [ガードレール](/openai-agents-js/ja/guides/guardrails) を追加
- [`tool()`](/openai-agents-js/openai/agents/functions/tool) と各種 組み込みツール（Hosted）の型について TypeDoc リファレンスを参照
